/** Copyright (c) 2013-2014 Mandarinazul
 * Author: Julian Acosta
 * Licence: http://opensource.org/licenses/MIT
 * Version: 1.3.1
 */

(function(e){e.fn.aspectRatioResizeImg=function(t){var n=e.extend({backgroundHorizontalAlign:"CENTER",backgroundVerticalAlign:"MIDDLE",resizeContainerType:null,debug:false,callback:null,imageClass:null,mode:"FILL",horizontalAlignFrom:"LEFT",verticalAlignFrom:"TOP"},t);return this.each(function(){function h(){f=a.width()/a.height();l=c.attr("width")/c.attr("height");m()}function p(){if(n.resizeContainerType==="WIDTH"){var e=a.height()*l;if(a.css("box-sizing")==="border-box"){e+=parseInt(a.css("padding-left"));e+=parseInt(a.css("padding-right"));e+=parseInt(a.css("border-left-width"));e+=parseInt(a.css("border-right-width"))}a.css("width",e)}else{if(n.resizeContainerType==="HEIGHT"){var t=a.width()/l;if(a.css("box-sizing")==="border-box"){t+=parseInt(a.css("padding-top"));t+=parseInt(a.css("padding-bottom"));t+=parseInt(a.css("border-top-width"));t+=parseInt(a.css("border-bottom-width"))}a.css("height",t)}}g()}function d(){var e=f>l?true:false;if(n.mode==="FILL"){if(e){c.attr("width",a.width());c.attr("height",c.attr("width")/l)}else{c.attr("height",a.height());c.attr("width",c.attr("height")*l)}}else if(n.mode==="FIT"){if(e){c.attr("height",a.height());c.attr("width",c.attr("height")*l)}else{c.attr("width",a.width());c.attr("height",c.attr("width")/l)}}else if(n.mode==="STRETCH"){c.attr("width",a.width());c.attr("height",a.height())}y()}function v(){t=a.height();r=c.height();i=r-t;s=a.width();o=c.width();u=o-s;if(n.mode==="CENTER"){c.css("marginLeft",-u/2);c.css("marginTop",-i/2)}else if(n.mode==="VERTICAL_CENTER"){c.css("marginTop",-i/2);if(n.backgroundHorizontalAlign==="LEFT"){c.css("marginLeft",0)}else if(n.backgroundHorizontalAlign==="CENTER"){c.css("marginLeft",-u/2)}else if(n.backgroundHorizontalAlign==="RIGHT"){c.css("marginLeft",-u)}else{if(n.horizontalAlignFrom==="LEFT"){c.css("marginLeft",n.backgroundHorizontalAlign)}else if(n.horizontalAlignFrom==="RIGHT"){c.css("marginLeft","-"+n.backgroundHorizontalAlign)}}}else{if(n.backgroundHorizontalAlign==="LEFT"){c.css("marginLeft",0)}else if(n.backgroundHorizontalAlign==="CENTER"){c.css("marginLeft",-u/2)}else if(n.backgroundHorizontalAlign==="RIGHT"){c.css("marginLeft",-u)}else{if(n.horizontalAlignFrom==="LEFT"){c.css("marginLeft",n.backgroundHorizontalAlign)}else if(n.horizontalAlignFrom==="RIGHT"){if(n.backgroundHorizontalAlign.substring(0,1)==="-"){n.backgroundHorizontalAlign=n.backgroundHorizontalAlign.substring(1,n.backgroundHorizontalAlign.length)}c.css("marginLeft","-"+n.backgroundHorizontalAlign)}}if(n.backgroundVerticalAlign==="TOP"){c.css("marginTop",0)}else if(n.backgroundVerticalAlign==="MIDDLE"){c.css("marginTop",-i/2)}else if(n.backgroundVerticalAlign==="BOTTOM"){c.css("marginTop",-i)}else{if(n.verticalAlignFrom==="TOP"){c.css("marginTop",n.backgroundVerticalAlign)}else if(n.verticalAlignFrom==="BOTTOM"){if(n.backgroundVerticalAlign.substring(0,1)==="-"){n.backgroundVerticalAlign=n.backgroundVerticalAlign.substring(1,n.backgroundVerticalAlign.length)}c.css("marginTop","-"+n.backgroundVerticalAlign)}}b()}}function m(){if(n.debug){console.log("Container AR :"+f);console.log("Img AR :"+l)}}function g(){if(n.debug){console.log("Container WIDTH :"+a.width());console.log("Container HEIGHT :"+a.height())}}function y(){if(n.debug){console.log("IMG WIDTH:"+c.width());console.log("IMG HEIGHT:"+c.height())}}function b(){if(n.debug){console.log("Width Difference"+u);console.log("Height Difference"+i)}}var t;var r;var i;var s;var o;var u;var a=e(this);var f;var l;var c;if(n.imageClass){c=a.find("img."+n.imageClass)}else{c=a.find("img")}c.css("display","block");h();p();h();d();v();if(n.callback){n.callback()}})}})(jQuery);