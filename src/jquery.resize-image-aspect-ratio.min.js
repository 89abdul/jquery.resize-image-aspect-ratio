/** Copyright (c) 2013-2014 Mandarinazul
 * Author: Julian Acosta
 * Licence: http://opensource.org/licenses/MIT
 * Version: 1.3.5
 */

(function(e){e.fn.aspectRatioResizeImg=function(t){var n=e.extend({backgroundHorizontalAlign:"CENTER",backgroundVerticalAlign:"MIDDLE",resizeContainerType:null,debug:false,callback:null,imageClass:null,mode:"FILL",horizontalAlignFrom:"LEFT",verticalAlignFrom:"TOP"},t);return this.each(function(){function d(){if(n.originalImageHeight||n.originalImageWidth){c=n.originalImageWidth;h=n.originalImageHeight}else{c=p.attr("width");h=p.attr("height")}f=a.width()/a.height();l=c/h;y()}function v(){if(n.resizeContainerType==="WIDTH"){var e=a.height()*l;if(a.css("box-sizing")==="border-box"){e+=parseInt(a.css("padding-left"));e+=parseInt(a.css("padding-right"));e+=parseInt(a.css("border-left-width"));e+=parseInt(a.css("border-right-width"))}a.css("width",e)}else{if(n.resizeContainerType==="HEIGHT"){var t=a.width()/l;if(a.css("box-sizing")==="border-box"){t+=parseInt(a.css("padding-top"));t+=parseInt(a.css("padding-bottom"));t+=parseInt(a.css("border-top-width"));t+=parseInt(a.css("border-bottom-width"))}a.css("height",t)}}b()}function m(){var e;if(f>l){e=1}else if(f<l){e=2}else{e=0}if(n.mode==="FILL"){if(e==1){p.attr("width",a.width());p.attr("height",o/l);p.width(a.width());p.height(o/l)}else if(e==2){p.attr("height",a.height());p.attr("width",r*l);p.height(a.height());p.width(r*l)}else{p.attr("width",a.width());p.attr("height",a.height());p.width(a.width());p.height(a.height())}}else if(n.mode==="FIT"){if(e==1){p.attr("height",a.height());p.attr("width",r*l);p.height(a.height());p.width(r*l)}else if(e==2){p.attr("width",a.width());p.attr("height",o/l);p.width(a.width());p.height(o/l)}else{p.attr("width",a.width());p.attr("height",a.height());p.width(a.width());p.height(a.height())}}else if(n.mode==="STRETCH"){p.attr("width",a.width());p.attr("height",a.height());p.width(a.width());p.height(a.height())}w()}function g(){t=a.height();r=p.height();i=r-t;s=a.width();o=p.width();u=o-s;if(n.mode==="CENTER"){p.css("marginLeft",-u/2);p.css("marginTop",-i/2)}else if(n.mode==="VERTICAL_CENTER"){p.css("marginTop",-i/2);if(n.backgroundHorizontalAlign==="LEFT"){p.css("marginLeft",0)}else if(n.backgroundHorizontalAlign==="CENTER"){p.css("marginLeft",-u/2)}else if(n.backgroundHorizontalAlign==="RIGHT"){p.css("marginLeft",-u)}else{if(n.horizontalAlignFrom==="LEFT"){p.css("marginLeft",n.backgroundHorizontalAlign)}else if(n.horizontalAlignFrom==="RIGHT"){p.css("marginLeft","-"+n.backgroundHorizontalAlign)}}}else{if(n.backgroundHorizontalAlign==="LEFT"){p.css("marginLeft",0)}else if(n.backgroundHorizontalAlign==="CENTER"){p.css("marginLeft",-u/2)}else if(n.backgroundHorizontalAlign==="RIGHT"){p.css("marginLeft",-u)}else{if(n.horizontalAlignFrom==="LEFT"){p.css("marginLeft",n.backgroundHorizontalAlign)}else if(n.horizontalAlignFrom==="RIGHT"){if(n.backgroundHorizontalAlign.substring(0,1)==="-"){n.backgroundHorizontalAlign=n.backgroundHorizontalAlign.substring(1,n.backgroundHorizontalAlign.length)}p.css("marginLeft","-"+n.backgroundHorizontalAlign)}}if(n.backgroundVerticalAlign==="TOP"){p.css("marginTop",0)}else if(n.backgroundVerticalAlign==="MIDDLE"){p.css("marginTop",-i/2)}else if(n.backgroundVerticalAlign==="BOTTOM"){p.css("marginTop",-i)}else{if(n.verticalAlignFrom==="TOP"){p.css("marginTop",n.backgroundVerticalAlign)}else if(n.verticalAlignFrom==="BOTTOM"){if(n.backgroundVerticalAlign.substring(0,1)==="-"){n.backgroundVerticalAlign=n.backgroundVerticalAlign.substring(1,n.backgroundVerticalAlign.length)}p.css("marginTop","-"+n.backgroundVerticalAlign)}}E()}}function y(){if(n.debug){console.log("Container AR :"+f);console.log("Img AR :"+l)}}function b(){if(n.debug){console.log("Container WIDTH :"+a.width());console.log("Container HEIGHT :"+a.height())}}function w(){if(n.debug){console.log("IMG WIDTH:"+p.width());console.log("IMG HEIGHT:"+p.height())}}function E(){if(n.debug){console.log("Width Difference: "+u);console.log("Height Difference: "+i)}}var t;var r;var i;var s;var o;var u;var a=e(this);var f;var l;var c;var h;var p;if(n.imageClass){p=a.find("img."+n.imageClass)}else{p=a.find("img")}p.css("display","block");d();v();d();m();g();if(n.callback){n.callback()}})}})(jQuery)